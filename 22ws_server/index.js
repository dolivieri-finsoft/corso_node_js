const WebSocket = require('ws');

const wss = new WebSocket.Server({ port: 60000 });

// una immagine in data uri
let imguri = 'data:image/png;base64,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';

wss.on('connection', function connection(ws) {
  ws.on('message', function incoming(message) {
    console.log('received: %s', message);
    ws.send('I hear you!');
  });

  ws.send('Welcome, i am a websocket server!');

  ws.send('data:image/gif;base64,R0lGODlhEAAQAMQAAORHHOVSKudfOulrSOp3WOyDZu6QdvCchPGolfO0o/XBs/fNwfjZ0frl3/zy7////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAkAABAALAAAAAAQABAAAAVVICSOZGlCQAosJ6mu7fiyZeKqNKToQGDsM8hBADgUXoGAiqhSvp5QAnQKGIgUhwFUYLCVDFCrKUE1lBavAViFIDlTImbKC5Gm2hB0SlBCBMQiB0UjIQA7');

  ws._interval = setInterval(function(){
    ws.send(imguri);
  },5000);

});

console.log('wss started...');

